(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(22),i=n.n(o),a=n(2),s=n(21),d=n.n(s),u=n(5),l=n(24),j=(n(105),n(0)),O=function(e){return Object(j.jsx)(a.h,{children:Object(j.jsx)(a.c,{disabled:e.disabled,stretched:e.stretched,mode:e.mode,onClick:e.onClick,size:e.size,children:e.text})})},b=function(e){var t=e.name,n=e.status,r=e.value,c=e.placeholder,o=e.onChange,i=e.type,s=void 0===i?"text":i,d=e.required;return Object(j.jsx)(a.h,{children:Object(j.jsx)(a.p,{name:t,status:n,value:r,placeholder:c,onChange:function(e){var t=e.target;return o(t.value)},type:s,required:d})})},f=function(e){var t=e.inputs,n=e.mode;return Object(j.jsx)(a.j,{mode:n,children:Object.keys(t).map((function(e){return Object(j.jsx)(b,{status:t[e].status,name:e,value:t[e].value,placeholder:t[e].placeholder,onChange:t[e].onChange,type:t[e].type?t[e].type:"text",required:t[e].required},e)}))})},h=function(e){return Object(j.jsxs)(a.i,{children:[Object(j.jsx)(f,{inputs:{username:{value:e.username,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onChange:e.onUsernameChange,required:!0},password:{value:e.password,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:e.onPasswordChange,required:!0,type:"password"}}}),Object(j.jsx)(O,{text:"\u0412\u0445\u043e\u0434",mode:"primary",stretched:!0,onClick:e.onButtonClick})]})},S=n(108),_=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(""),s=Object(u.a)(i,2),d=s[0],l=s[1];return Object(j.jsxs)(a.I,{style:e.style,children:[Object(j.jsxs)(a.H,{width:"250px",maxWidth:"250px",children:[Object(j.jsx)(a.G,{}),Object(j.jsx)(h,{username:c,password:d,onUsernameChange:o,onPasswordChange:l,onButtonClick:function(){return e.onButtonClick(c,d)}})]}),Object(j.jsx)(a.H,{animate:!1,spaced:!0,width:"560px",maxWidth:"900px",children:Object(j.jsx)(a.C,{icon:Object(j.jsx)(S.a,{}),stretched:!0,header:"\u0414\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})},v=n(109),x=function(e){return Object(j.jsx)(a.h,{children:Object(j.jsx)(a.t,{required:e.required,status:e.status,placeholder:e.placeholder,name:e.name,value:e.value,onChange:function(t){var n=t.target;return e.onChange(n.value)},children:e.values.map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)}))})})};var p=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(r.useEffect)((function(){return function(e){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/roles").then((function(e){return e.json()})).then((function(t){var n=t.data;return e(n)}))}(o)}),[]),Object(j.jsx)(x,{status:e.status,required:e.required,name:e.name,values:c?Object.keys(c):[],value:e.role,onChange:e.setRole,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"})};var C=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1];function i(t){e.setDepartment(t),e.setGroup("")}return Object(r.useEffect)((function(){return function(e){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/university").then((function(e){return e.json()})).then((function(t){var n=t.data;return e(n)}))}(o)}),[]),Object(j.jsxs)(a.j,{mode:e.mode,children:[Object(j.jsx)(x,{required:e.required,status:e.status,name:"faculty",values:Object.keys(c),value:e.faculty,onChange:function(t){e.setFaculty(t),e.facultyOnly||i("")},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442"}),!e.facultyOnly&&e.faculty?Object(j.jsx)(x,{required:e.required,status:e.status,name:"department",values:Object.keys(c[e.faculty]),value:e.department,onChange:i,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0444\u0435\u0434\u0440\u0443"}):"",e.department?Object(j.jsx)(x,{required:e.required,status:e.status,name:"group",values:c[e.faculty][e.department],value:e.group,onChange:e.setGroup,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443"}):""]})},T=function(e){return Object(j.jsxs)(a.j,{children:[Object(j.jsx)(p,{role:e.role,setRole:e.setRole}),Object(j.jsx)(C,{mode:e.universityMode,faculty:e.faculty,setFaculty:e.setFaculty,facultyOnly:e.facultyOnly,department:e.department,setDepartment:e.setDepartment,group:e.group,setGroup:e.setGroup})]})},E=function(e){return Object(j.jsxs)(a.j,{mode:"horizontal",children:[Object(j.jsx)(b,{name:"lastName",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:e.lastName,onChange:e.setLastName}),Object(j.jsx)(b,{name:"firstName",placeholder:"\u0418\u043c\u044f",value:e.firstName,onChange:e.setFirstName}),Object(j.jsx)(b,{name:"surname",placeholder:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",value:e.surname,onChange:e.setSurname})]})},m=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(""),s=Object(u.a)(i,2),b=s[0],f=s[1],h=Object(r.useState)(""),S=Object(u.a)(h,2),_=S[0],v=S[1],x=Object(r.useState)(""),p=Object(u.a)(x,2),C=p[0],m=p[1],P=Object(r.useState)(""),A=Object(u.a)(P,2),R=A[0],k=A[1],y=Object(r.useState)(""),I=Object(u.a)(y,2),D=I[0],H=I[1],N=Object(r.useState)(""),L=Object(u.a)(N,2),F=L[0],g=L[1];function W(e){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r={},c&&(r.firstName=c),b&&(r.lastName=b),_&&(r.middleName=_),C&&(r.role=C),R&&(r.faculty=R),D&&(r.department=D),F&&(r.group=F),e.setBody(r);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(j.jsxs)(a.i,{name:"filterQuery",onSubmit:W,children:[Object(j.jsx)(E,{firstName:c,setFirstName:o,lastName:b,setLastName:f,surname:_,setSurname:v}),Object(j.jsx)(T,{role:C,setRole:m,faculty:R,setFaculty:k,department:D,setDepartment:H,group:F,setGroup:g}),Object(j.jsx)(O,{stretched:!0,mode:"primary",onClick:W,size:"l",text:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})]})},P=function(e){var t=e.readerList,n=e.openReaderInfo;return Object(j.jsx)(a.k,{header:Object(j.jsxs)(a.l,{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e: ",t.count]}),mode:"plain",children:null===t||void 0===t?void 0:t.data.map((function(e){return Object(j.jsx)(A,{reader:e,openReaderInfo:n},e.Id)}))})},A=function(e){var t,n=e.reader,r=e.openReaderInfo;return Object(j.jsx)(a.F,{after:Object(j.jsx)(v.a,{}),onClick:function(){return r(n.Id)},children:Object(j.jsx)(a.m,{weight:"medium",children:"".concat(n.Surname," ").concat(n.Name," ").concat(null!==(t=n.Mid_name)&&void 0!==t?t:"")})})},R=function(e){var t=Object(r.useState)(!0),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)({}),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(r.useState)(null),b=Object(u.a)(O,2),f=b[0],h=b[1];return Object(r.useEffect)((function(){fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/readers/query"),{method:"POST",body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(t){h(Object(j.jsx)(P,{readerList:t,openReaderInfo:e.openReaderInfo})),o(!1)})).catch((function(e){console.error(e),o(!1)}))}),[d]),Object(j.jsxs)(a.u,{id:e.id,children:[Object(j.jsx)(a.v,{left:Object(j.jsx)(a.x,{onClick:e.addReaderButtonClick,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f"}),children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(j.jsxs)(a.k,{children:[c?Object(j.jsx)(a.B,{height:96,size:"large"}):f?Object(j.jsx)(m,{setBody:l}):Object(j.jsx)(a.C,{icon:Object(j.jsx)(S.a,{}),header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),f]})]})},k=n(111),y=n(112),I=n(110),D=function(e){var t=e.header,n=void 0===t?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445":t;return Object(j.jsx)(a.C,{icon:Object(j.jsx)(I.a,{}),header:n})};var H=function(e){var t,n=e.props,c=e.setPlaceholder,o=Object(r.useState)(n.firstName),i=Object(u.a)(o,2),s=i[0],d=i[1],l=Object(r.useState)(n.lastName),b=Object(u.a)(l,2),h=b[0],S=b[1],_=Object(r.useState)(n.middleName),v=Object(u.a)(_,2),x=v[0],T=v[1],E=Object(r.useState)(n.role),m=Object(u.a)(E,2),P=m[0],A=m[1],R=Object(r.useState)(""),k=Object(u.a)(R,2),y=k[0],I=k[1],H=Object(r.useState)(""),N=Object(u.a)(H,2),L=N[0],F=N[1],g=Object(r.useState)(""),W=Object(u.a)(g,2),K=W[0],M=W[1],B=Object(r.useState)(""),U=Object(u.a)(B,2),q=U[0],V=U[1],w=Object(r.useState)(""),z=Object(u.a)(w,2),J=z[0],G=z[1];return Object(j.jsxs)(a.i,{name:"addReader",children:[Object(j.jsx)(f,{inputs:{addReaderLasttName:{value:h,onChange:S,placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",required:!0},addReaderFirstName:{value:s,onChange:d,placeholder:"\u0418\u043c\u044f",required:!0},addReaderMiddleName:{value:x,onChange:T,placeholder:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}},mode:"horizontal"}),Object(j.jsx)(p,{role:P,setRole:A,required:!0,status:P?"valid":"error"}),Object(j.jsx)(C,{faculty:y,setFaculty:I,department:L,setDepartment:F,group:K,setGroup:M}),n.onClick?null:Object(j.jsx)(f,{inputs:{login:{value:q,onChange:V,placeholder:"\u041b\u043e\u0433\u0438\u043d \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430",required:!0},password:{value:J,onChange:G,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430",type:"password",required:!0}},mode:"horizontal"}),Object(j.jsx)(O,{stretched:!0,mode:"primary",onClick:function(){if(P&&s&&h){var e={firstName:s,lastName:h,middleName:""!==x?x:null,role:P,faculty:""===y?null:y,department:""===L?null:L,group:""===K?null:K};console.log(n.onClick),n.onClick?n.onClick(e):(e.login=q,e.password=J,function(e,t){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers",{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.ok?t(Object(j.jsx)(a.C,{header:"\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"})):t(Object(j.jsx)(a.C,{header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f"}))})).catch((function(e){return t(Object(j.jsx)(D,{}))}))}(e,c))}},size:"l",text:null!==(t=n.text)&&void 0!==t?t:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})},N=function(e){var t,n,c,o,i=e.reader,s=Object(r.useState)(null),d=Object(u.a)(s,2),l=d[0],O=d[1];return null!==l&&void 0!==l?l:Object(j.jsx)(H,{props:{firstName:i.Name,lastName:i.Surname,middleName:null!==(t=i.Mid_name)&&void 0!==t?t:"",role:i.Role,faculty:null!==(n=i.Faculty)&&void 0!==n?n:"",department:null!==(c=i.Department)&&void 0!==c?c:"",group:null!==(o=i.Group)&&void 0!==o?o:"",onClick:function(e){console.log(e),fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/"+i.Id,{method:"PUT",body:JSON.stringify(e)}).then((function(e){return e.ok?O(Object(j.jsx)(a.C,{header:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430"})):O(Object(j.jsx)(a.C,{header:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"}))})).catch((function(e){return O(Object(j.jsx)(D,{}))}))},text:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"}})},L=function(e){var t,n,r,c;return Object(j.jsxs)(a.k,{header:Object(j.jsx)(a.l,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),mode:"card",children:[Object(j.jsx)(F,{after:e.reader.Issued?Object(j.jsx)(k.a,{}):null,indicator:null!==(t=e.reader.Issued)&&void 0!==t?t:0,text:"\u041a\u043d\u0438\u0433 \u043d\u0430 \u0440\u0443\u043a\u0430\u0445",onClick:function(){return e.setActiveModal("issuedBooksList")},disabled:!e.reader.Issued}),Object(j.jsx)(F,{after:e.reader.Lost?Object(j.jsx)(k.a,{}):null,indicator:null!==(n=e.reader.Lost)&&void 0!==n?n:0,onClick:function(){return e.setActiveModal("lostBooksList")},text:"\u041f\u043e\u0442\u0435\u0440\u044f\u043d\u043e \u043a\u043d\u0438\u0433",disabled:!e.reader.Lost}),Object(j.jsx)(F,{after:e.reader.Total_infractions?Object(j.jsx)(k.a,{}):null,indicator:null!==(r=e.reader.Total_infractions)&&void 0!==r?r:0,onClick:function(){return e.setActiveModal("issuedInfractionsList")},text:"\u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0439",disabled:!e.reader.Total_infractions}),Object(j.jsx)(F,{after:e.reader.Active_infractions?Object(j.jsx)(k.a,{}):null,indicator:null!==(c=e.reader.Active_infractions)&&void 0!==c?c:0,onClick:function(){return e.setActiveModal("activeInfractionsList")},text:"\u0418\u0437 \u043d\u0438\u0445 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445",disabled:!e.reader.Active_infractions})]})},F=function(e){return null!==e.indicator?Object(j.jsx)(a.F,{before:e.before,after:e.after,disabled:e.disabled,indicator:e.indicator,onClick:e.onClick,children:e.text}):""},g=function(e){var t=e.canEditInfo,n=e.reader,r=e.editReaderInfo;return Object(j.jsxs)(a.k,{mode:"card",children:[n.Leave?Object(j.jsx)(F,{disabled:!0,indicator:Object(j.jsx)(y.a,{}),text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0432\u044b\u0431\u044b\u0432\u0448\u0438\u043c"}):null,Object(j.jsx)(F,{disabled:!0,indicator:n.Role,text:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"}),Object(j.jsx)(F,{disabled:!0,indicator:n.Faculty,text:"\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442"}),Object(j.jsx)(F,{disabled:!0,indicator:n.Department,text:"\u041a\u0430\u0444\u0435\u0434\u0440\u0430"}),Object(j.jsx)(F,{disabled:!0,indicator:n.Group,text:"\u0413\u0440\u0443\u043f\u043f\u0430"}),t?Object(j.jsx)(a.e,{onClick:r,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"}):null]})},W=function(e){return Object(j.jsxs)(a.k,{separator:!0,children:[Object(j.jsx)(g,{canEditInfo:e.canEditInfo,reader:e.reader,editReaderInfo:e.editReaderInfo}),Object(j.jsx)(L,{reader:e.reader,setActiveModal:e.setActiveModal})]})};var K=function(e){var t,n=Object(r.useState)(null),c=Object(u.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)(!1),d=Object(u.a)(s,2),l=d[0],O=d[1],b=Object(r.useState)(!1),f=Object(u.a)(b,2),h=f[0],S=f[1];return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/".concat(e.readerId)).then((function(e){return e.json()})).then((function(e){var t=e.data;return i(t[0])}))}),[e.readerId,l]),Object(j.jsxs)(a.q,{id:e.id,onClose:e.onClose,settlingHeight:100,children:[Object(j.jsx)(a.r,{left:l?Object(j.jsx)(a.w,{onClick:function(){return O(!1)}}):"",right:l?h?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(a.y,{onClick:function(){return S(!1)}}),Object(j.jsx)(a.z,{isActive:!0,onClick:function(){return t=o.Id,n=e.setActiveModal,void fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/"+t,{method:"DELETE"}).then((function(e){return n(null)}));var t,n}})]}):Object(j.jsx)(a.x,{onClick:function(){return S(!0)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}):"",children:o?"".concat(o.Surname," ").concat(o.Name," ").concat(null!==(t=o.Mid_name)&&void 0!==t?t:""):""}),o?l?Object(j.jsx)(N,{reader:o}):Object(j.jsx)(W,{canEditInfo:!0,reader:o,editReaderInfo:function(){return O(!0)},setActiveModal:e.setActiveModal}):""]})},M=function(e){var t=e.book,n=e.indicator;return Object(j.jsx)(a.k,{mode:"card",children:Object(j.jsxs)(a.F,{multiline:!0,disabled:!0,indicator:n,children:[Object(j.jsx)(a.o,{header:"\u0410\u0432\u0442\u043e\u0440\u044b",style:{marginBottom:10},children:t.Authors}),Object(j.jsx)(a.o,{header:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",children:t.Title})]})})},B=function(e){var t=e.list;return Object(j.jsx)(a.k,{children:t.data.map((function(e){return Object(j.jsx)(M,{book:e,indicator:"\u0413\u043e\u0434 \u0438\u0437\u0434\u0430\u043d\u0438\u044f: ".concat(e.Publication_year)},e.Id)}))})},U=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/".concat(e.readerId,"/books")).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return console.error(e)}))}),[e.readerId]),Object(j.jsxs)(a.q,{id:e.id,onClose:e.onCLose,children:[Object(j.jsxs)(a.r,{children:["\u0412\u044b\u0434\u0430\u043d\u043d\u044b\u0435 \u043a\u043d\u0438\u0433\u0438 ",c?"(".concat(c.count,")"):""]}),c?Object(j.jsx)(B,{list:c}):Object(j.jsx)(a.B,{})]})},q=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/".concat(e.readerId,"/books?status=lost")).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return console.error(e)}))}),[e.readerId]),Object(j.jsxs)(a.q,{id:e.id,onClose:e.onCLose,children:[Object(j.jsxs)(a.r,{children:["\u041f\u043e\u0442\u0435\u0440\u044f\u043d\u043d\u044b\u0435 \u043a\u043d\u0438\u0433\u0438 ",c?"(".concat(c.count,")"):""]}),c?Object(j.jsx)(B,{list:c}):Object(j.jsx)(a.B,{})]})},V=function(e){var t,n=Object(r.useState)(null),c=Object(u.a)(n,2),o=c[0],i=c[1];return Object(j.jsxs)(a.q,{id:e.id,onClose:e.onClose,children:[Object(j.jsx)(a.r,{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f"}),null!==o&&void 0!==o?o:Object(j.jsx)(H,{props:null!==(t=e.props)&&void 0!==t?t:e,setPlaceholder:i})]})},w=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/"+e.reader.Id).then((function(e){return e.json()})).then((function(e){var t=e.data;return o(t[0])})).catch((function(e){return console.error(e)}))}),[e.reader]),Object(j.jsxs)(a.q,{id:e.id,onClose:function(){return e.setActiveModal(null)},children:[Object(j.jsx)(a.r,{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435"}),c?Object(j.jsx)(g,{reader:c}):null]})};function z(e){var t=new Date(1e3*e);return"".concat(t.getDate(),".").concat(("0"+(t.getMonth()+1)).slice(-2),".").concat(t.getFullYear())}var J=function(e){var t,n=e.infraction,r=e.indicator;return Object(j.jsx)(a.k,{mode:"card",children:Object(j.jsxs)(a.k,{mode:"plain",children:[Object(j.jsx)(a.F,{disabled:!0,indicator:r,children:n.Infraction}),Object(j.jsx)(a.F,{disabled:!0,description:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0434\u0430\u0447\u0438",children:z(n.Issue_date)}),Object(j.jsx)(a.F,{disabled:!0,description:"\u0414\u0430\u0442\u0430 \u0441\u043d\u044f\u0442\u0438\u044f \u0437\u0430\u043f\u0440\u0435\u0442\u0430",children:n.End_of_ban_date?z(n.End_of_ban_date):"\u0411\u0435\u0437 \u0437\u0430\u043f\u0440\u0435\u0442\u0430"}),Object(j.jsx)(a.F,{disabled:!0,description:"\u0414\u0435\u043d\u0435\u0436\u043d\u044b\u0439 \u0448\u0442\u0440\u0430\u0444",children:null!==(t=n.Monetary_fine)&&void 0!==t?t:"\u0411\u0435\u0437 \u0448\u0442\u0440\u0430\u0444\u0430"})]})})},G=function(e){var t=e.list;return Object(j.jsx)(a.k,{children:t.data.map((function(e){return Object(j.jsx)(J,{infraction:e,indicator:e.Is_active?"\u0410\u043a\u0442\u0438\u0432\u043d\u043e":""},e.Num)}))})},Y=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/".concat(e.readerId,"/infractions")).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return console.error(e)}))}),[e.readerId]),Object(j.jsxs)(a.q,{id:e.id,onClose:e.onCLose,children:[Object(j.jsxs)(a.r,{children:["\u0412\u044b\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f ",c?"(".concat(c.count,")"):""]}),c?Object(j.jsx)(G,{list:c}):Object(j.jsx)(a.B,{})]})},Q=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/".concat(e.readerId,"/infractions?is_active=true")).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return console.error(e)}))}),[e.readerId]),Object(j.jsxs)(a.q,{id:e.id,onClose:e.onCLose,children:[Object(j.jsxs)(a.r,{children:["\u0412\u044b\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f ",c?"(".concat(c.count,")"):""]}),c?Object(j.jsx)(G,{list:c}):Object(j.jsx)(a.B,{})]})},X=function(e){return Object(j.jsxs)(a.s,{activeModal:e.activeModal,onClose:function(){return e.setActiveModal(null)},children:[Object(j.jsx)(V,{id:"addReader",onClose:function(){return e.setActiveModal(null)},setActiveModal:e.setActiveModal}),Object(j.jsx)(K,{id:"readerInfo",onClose:function(){return e.setActiveModal(null)},setActiveModal:e.setActiveModal,readerId:e.readerId}),Object(j.jsx)(U,{id:"issuedBooksList",onClose:function(){return e.setActiveModal("readerInfo")},readerId:e.readerId}),Object(j.jsx)(q,{id:"lostBooksList",onClose:function(){return e.setActiveModal("readerInfo")},readerId:e.readerId}),Object(j.jsx)(Y,{id:"issuedInfractionsList",onClose:function(){return e.setActiveModal("readerInfo")},readerId:e.readerId}),Object(j.jsx)(Q,{id:"activeInfractionsList",onClose:function(){return e.setActiveModal("readerInfo")},readerId:e.readerId}),Object(j.jsx)(w,{id:"userInformation",onClose:function(){return e.setActiveModal(null)},reader:e.user,setActiveModal:e.setActiveModal})]})},Z=function(e){var t=e.setBody,n=Object(r.useState)(10),c=Object(u.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)(""),d=Object(u.a)(s,2),l=d[0],b=d[1],h=Object(r.useState)(""),S=Object(u.a)(h,2),_=S[0],v=S[1],x=Object(r.useState)(""),p=Object(u.a)(x,2),C=p[0],E=p[1],m=Object(r.useState)(""),P=Object(u.a)(m,2),A=P[0],R=P[1],k=Object(r.useState)(""),y=Object(u.a)(k,2),I=y[0],D=y[1];return Object(j.jsxs)(a.i,{children:[Object(j.jsx)(f,{inputs:{debtPeriod:{value:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434 \u0437\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0432 \u0434\u043d\u044f\u0445",onChange:i,type:"number"},libraryPoint:{value:l,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u043d\u043a\u0442\u0430",onChange:b}},mode:"horizontal"}),Object(j.jsx)(T,{faculty:_,setFaculty:v,department:C,setDepartment:E,group:A,setGroup:R,role:I,setRole:D,universityMode:"horizontal"}),Object(j.jsx)(O,{onClick:function(){t({debtPeriod:""!==o?o:10,libraryPoint:""!==l?l:null,faculty:""!==_?_:null,department:""!==C?C:null,group:""!==A?A:null,role:""!==I?I:null})},disabled:o<0,size:"l",stretched:!0,mode:"primary",text:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})]})},$=function(e){var t=Object(r.useState)({}),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(r.useState)(!0),b=Object(u.a)(O,2),f=b[0],h=b[1];return Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/debtors",{method:"POST",body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){l(e),h(!1)})).catch((function(e){console.error(e),h(!1)}))}),[c]),Object(j.jsxs)(a.u,{id:e.id,children:[Object(j.jsx)(a.v,{children:"\u0417\u0430\u0434\u043e\u043b\u0436\u043d\u0438\u043a\u0438"}),Object(j.jsxs)(a.k,{children:[f?Object(j.jsx)(a.B,{height:96,size:"large"}):d?Object(j.jsx)(Z,{setBody:o}):Object(j.jsx)(a.C,{icon:Object(j.jsx)(S.a,{}),header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),d?Object(j.jsx)(P,{readerList:d,openReaderInfo:e.openReaderInfo}):null]})]})},ee=function(e){var t=Object(r.useState)({day:1,month:1,year:2020}),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)({day:1,month:1,year:2022}),s=Object(u.a)(i,2),d=s[0],l=s[1],b=Object(r.useState)(""),f=Object(u.a)(b,2),h=f[0],S=f[1],_=Object(r.useState)(""),v=Object(u.a)(_,2),x=v[0],p=v[1],C=Object(r.useState)(""),E=Object(u.a)(C,2),m=E[0],P=E[1],A=Object(r.useState)(""),R=Object(u.a)(A,2),k=R[0],y=R[1];return Object(j.jsxs)(a.i,{children:[Object(j.jsxs)(a.j,{mode:"horizontal",children:[Object(j.jsx)(a.h,{top:"\u0412\u044b\u0431\u044b\u0432\u0448\u0438\u0435 \u043f\u043e\u0441\u043b\u0435:",children:Object(j.jsx)(a.g,{min:{day:1,month:1,year:2020},max:{day:1,month:1,year:2022},defaultValue:c,onDateChange:o,dayPlaceholder:"\u0414\u0414",monthPlaceholder:"\u041c\u041c\u041c\u041c",yearPlaceholder:"\u0413\u0413\u0413\u0413"})}),Object(j.jsx)(a.h,{top:"\u0412\u044b\u0431\u044b\u0432\u0448\u0438\u0435 \u0434\u043e:",children:Object(j.jsx)(a.g,{min:{day:1,month:1,year:2020},max:{day:1,month:1,year:2022},defaultValue:d,onDateChange:l,dayPlaceholder:"\u0414\u0414",monthPlaceholder:"\u041c\u041c\u041c\u041c",yearPlaceholder:"\u0413\u0413\u0413\u0413"})})]}),Object(j.jsx)(T,{faculty:h,setFaculty:S,department:x,setDepartment:p,group:m,setGroup:P,role:k,setRole:y,universityMode:"horizontal"}),Object(j.jsx)(O,{onClick:function(){e.setBody({leaveAfterDay:c.day,leaveAfterMonth:c.month,leaveAfterYear:c.year,leaveBeforeDay:d.day,leaveBeforeMonth:d.month,leaveBeforeYear:d.year,faculty:""!==h?h:null,department:""!==x?x:null,group:""!==m?m:null,role:""!==k?k:null})},size:"l",stretched:!0,mode:"primary",text:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})]})},te=function(e){var t=Object(r.useState)({leaveAfterDay:1,leaveAfterMonth:1,leaveAfterYear:2020,leaveBeforeDay:1,leaveBeforeMonth:1,leaveBeforeYear:2022}),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(r.useState)(!0),b=Object(u.a)(O,2),f=b[0],h=b[1];return Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/leaved",{method:"POST",body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){l(e),h(!1)})).catch((function(e){console.error(e),h(!1)}))}),[c]),Object(j.jsxs)(a.u,{id:e.id,children:[Object(j.jsx)(a.v,{children:"\u0412\u044b\u0431\u044b\u0432\u0448\u0438\u0435 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0438"}),Object(j.jsxs)(a.k,{children:[f?Object(j.jsx)(a.B,{height:96,size:"large"}):d?Object(j.jsx)(ee,{setBody:o}):Object(j.jsx)(a.C,{icon:Object(j.jsx)(S.a,{}),header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),d?Object(j.jsx)(P,{readerList:d,openReaderInfo:e.openReaderInfo}):null]})]})},ne=function(e){var t=Object(r.useState)({}),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(r.useState)(!0),b=Object(u.a)(O,2),f=b[0],h=b[1];return Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/banned",{method:"POST",body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){l(e),h(!1)})).catch((function(e){console.error(e),h(!1)}))}),[c]),Object(j.jsxs)(a.u,{id:e.id,children:[Object(j.jsx)(a.v,{children:"\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435"}),Object(j.jsxs)(a.k,{children:[f?Object(j.jsx)(a.B,{height:96,size:"large"}):d?Object(j.jsx)(Z,{setBody:o}):Object(j.jsx)(a.C,{icon:Object(j.jsx)(S.a,{}),header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),d?Object(j.jsx)(P,{readerList:d,openReaderInfo:e.openReaderInfo}):null]})]})},re=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(j.jsx)(X,{readerId:c,activeModal:e.activeModal,setActiveModal:e.setActiveModal,user:e.user});function s(t){o(t),e.setActiveModal("readerInfo")}return Object(j.jsxs)(a.K,{id:e.id,activePanel:e.activePanel,modal:i,children:[Object(j.jsx)(R,{id:"adminReaders",openReaderInfo:s,addReaderButtonClick:function(){return e.setActiveModal("addReader")}}),Object(j.jsx)($,{id:"adminDebtors",openReaderInfo:s}),Object(j.jsx)(ne,{id:"adminBanned",openReaderInfo:s}),Object(j.jsx)(te,{id:"adminLeaveReaders",openReaderInfo:s})]})},ce=n(113),oe=function(e){var t,n;return Object(j.jsx)(a.k,{mode:"plain",header:Object(j.jsxs)(a.l,{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e: ",null===(t=e.data)||void 0===t?void 0:t.count]}),children:null===(n=e.data)||void 0===n?void 0:n.data.map((function(t){return Object(j.jsx)(a.F,{disabled:e.disabled,onClick:function(){return e.openPointInfo(t)},indicator:t.Can_issue_books?"\u041c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043d\u0438\u0433\u0438":"",children:t.Name},t.Name)}))})},ie=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],i="\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"===e.user.Role;return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/library").then((function(e){return e.json()})).then((function(e){return o(e)}))}),[]),Object(j.jsxs)(a.u,{id:e.id,children:[Object(j.jsx)(a.v,{children:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u0447\u043d\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b"}),Object(j.jsxs)(a.k,{children:[i?Object(j.jsx)(a.F,{onClick:e.openStatistics,indicator:Object(j.jsx)(ce.a,{}),children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435"}):null,c?Object(j.jsx)(oe,{disabled:!i,openPointInfo:e.openPointInfo,data:c}):null]})]})},ae=n(114),se=function(e){var t,n=e.book,r=e.onClick;return Object(j.jsx)(a.k,{mode:"plain",children:Object(j.jsx)(a.F,{indicator:Object(j.jsx)(ae.a,{}),multiline:!0,onClick:function(){return r(n)},description:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e: ".concat(null!==(t=n.Available)&&void 0!==t?t:0),children:Object(j.jsx)(a.o,{header:n.Authors,children:Object(j.jsx)(a.J,{weight:"semibold",children:n.Title})})})})},de=function(e){var t=e.header,n=e.books,r=e.onClick;return Object(j.jsx)(a.k,{header:t,mode:"plain",children:n?n.map((function(e,t){return Object(j.jsx)(se,{book:e,onClick:r},t)})):""})},ue=function(e){return Object(j.jsxs)(a.k,{mode:"plain",children:[Object(j.jsx)(a.i,{children:Object(j.jsxs)(a.j,{mode:"horizontal",children:[Object(j.jsx)(O,{size:"l",stretched:!0,text:"\u0422\u043e\u043f \u043a\u043d\u0438\u0433",onClick:function(){return e.setActiveModal("booksOrdersTop")}}),Object(j.jsx)(O,{size:"l",stretched:!0,text:"\u0417\u0430\u043a\u0430\u0437\u044b \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434",onClick:function(){return e.setActiveModal("booksOrdersPeriod")}})]})}),Object(j.jsx)(de,{books:e.books,onClick:e.onClick,header:Object(j.jsxs)(a.l,{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e: ",e.count]})})]})},le=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(!0),s=Object(u.a)(i,2),d=s[0],l=s[1],O="\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"===e.user.Role;return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books").then((function(e){return e.json()})).then((function(t){o(Object(j.jsx)(ue,{setActiveModal:e.setActiveModal,count:t.count,books:t.data,onClick:e.openBookInfo})),l(!1)})).catch((function(e){console.error(e),o(Object(j.jsx)(a.C,{header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445",icon:Object(j.jsx)(S.a,{})})),l(!1)}))}),[]),Object(j.jsxs)(a.u,{id:e.id,children:[Object(j.jsx)(a.v,{left:O?Object(j.jsx)(a.x,{onClick:e.addBookButtonClick,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"}):null,children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043d\u0438\u0433"}),Object(j.jsx)(a.k,{children:d?Object(j.jsx)(a.B,{height:96,size:"large"}):c})]})};var je=function(e){var t,n,c,o,i,s=e.props,d=e.setPlaceholder,l=Object(r.useState)(null!==(t=s.title)&&void 0!==t?t:""),b=Object(u.a)(l,2),h=b[0],S=b[1],_=Object(r.useState)(null!==(n=s.authors)&&void 0!==n?n:""),v=Object(u.a)(_,2),x=v[0],p=v[1],C=Object(r.useState)(null!==(c=s.publisher)&&void 0!==c?c:""),T=Object(u.a)(C,2),E=T[0],m=T[1],P=Object(r.useState)(null!==(o=s.publicationYear)&&void 0!==o?o:0),A=Object(u.a)(P,2),R=A[0],k=A[1];return Object(j.jsxs)(a.i,{children:[Object(j.jsx)(f,{inputs:{add_title:{value:h,onChange:S,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",required:!0},add_authors:{value:x,onChange:p,placeholder:"\u0410\u0432\u0442\u043e\u0440\u044b",required:!0},add_publisher:{value:E,onChange:m,placeholder:"\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e",required:!0},add_publicationYear:{status:R>0?"default":"error",value:R,onChange:k,placeholder:"\u0413\u043e\u0434 \u0438\u0437\u0434\u0430\u043d\u0438\u044f",required:!0,type:"number"}}}),Object(j.jsx)(O,{disabled:!(h&&x&&E&&R>0),mode:"primary",size:"l",text:null!==(i=s.text)&&void 0!==i?i:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443",onClick:function(){var e={title:document.getElementsByName("add_title")[0].value,authors:document.getElementsByName("add_authors")[0].value,publisher:document.getElementsByName("add_publisher")[0].value,publicationYear:document.getElementsByName("add_publicationYear")[0].value};s.onClick?s.onClick(e):function(e,t){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books",{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.ok?t(Object(j.jsx)(a.C,{header:"\u041a\u043d\u0438\u0433\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"})):t(Object(j.jsx)(a.C,{header:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443 \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433"}))}))}(e,d)},stretched:!0})]})},Oe=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(j.jsxs)(a.q,{id:e.id,onClose:function(){return e.setActiveModal(null)},children:[Object(j.jsx)(a.r,{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443 \u0432 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u0447\u043d\u044b\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433"}),c||Object(j.jsx)(je,{props:e,setPlaceholder:o})]})},be=n(116),fe=n(115),he=function(e){var t=e.book,n=Object(r.useState)(null),c=Object(u.a)(n,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books/issue-logs?book_id="+t.Id).then((function(e){return e.json()})).then((function(e){return i(e)}))}),[t]),o?Object(j.jsx)(a.k,{header:Object(j.jsxs)(a.l,{children:["\u0412\u044b\u0434\u0430\u043d\u043e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u043e\u0432: ",o.count]}),children:o.data.map((function(e){return Object(j.jsx)(a.F,{multiline:!0,description:"\u0414\u043e\u043b\u0436\u0435\u043d \u0432\u0435\u0440\u043d\u0443\u0442\u044c ".concat(z(e.Return_date)),indicator:new Date(1e3*e.Return_date)<new Date?Object(j.jsx)(fe.a,{}):null,children:Object(j.jsxs)(a.o,{header:"ID \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f: ".concat(e.Id),children:[e.Surname," ",e.Name]})})}))}):null},Se=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1];return null!==c&&void 0!==c?c:Object(j.jsxs)(a.k,{children:[Object(j.jsx)(je,{props:{title:e.book.Title,authors:e.book.Authors,publisher:e.book.Publisher,publicationYear:e.book.Publication_year,text:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e",onClick:function(t){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books/"+e.book.Id,{method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.ok?o(Object(j.jsx)(a.C,{header:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430"})):o(Object(j.jsx)(a.C,{header:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"}))})).catch((function(e){return o(Object(j.jsx)(D,{}))}))}}}),Object(j.jsx)(he,{book:e.book})]})},_e=function(e){var t,n=e.userIsAdmin,r=e.publication,c=e.openBookInfo,o=e.openLibraryPointInfo;return Object(j.jsx)(a.F,{disabled:!0,before:n?Object(j.jsx)(a.n,{onClick:function(){return c(r)},children:Object(j.jsx)(be.a,{})}):"",after:r.Available?Object(j.jsx)(a.n,{onClick:function(){return o(r.Library_point,r)},children:Object(j.jsx)(v.a,{})}):null,multiline:!0,description:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e: ".concat(null!==(t=r.Available)&&void 0!==t?t:0,", \u0438\u0437\u0434\u0430\u043d\u0438\u0435 ").concat(r.Publication_year," \u0433\u043e\u0434\u0430"),children:r.Library_point})},ve=function(e){var t=e.userIsAdmin,n=e.publications,r=e.openLibraryPointInfo,c=e.openBookInfo;return Object(j.jsx)(a.k,{children:n.data.map((function(e,n){return Object(j.jsx)(_e,{userIsAdmin:t,publication:e,openBookInfo:c,openLibraryPointInfo:r},n)}))})},xe=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(r.useState)(null),b=Object(u.a)(O,2),f=b[0],h=b[1],S=Object(r.useState)(!1),_=Object(u.a)(S,2),v=_[0],x=_[1],p="\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"===e.user.Role;return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books/publications?title=".concat(e.book.Title,"&authors=").concat(e.book.Authors)).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[e.book,f]),Object(j.jsxs)(a.q,{id:e.id,onClose:function(){return e.setActiveModal(null)},children:[Object(j.jsx)(a.r,{left:f?Object(j.jsx)(a.w,{onClick:function(){return h(null)}}):null,right:f?v?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(a.y,{onClick:function(){return x(!1)}}),Object(j.jsx)(a.A,{onClick:function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books/"+d.Id,{method:"DELETE"}).then((function(e){return h(null)})),x(!1)}})]}):Object(j.jsx)(a.x,{onClick:function(){return x(!0)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}):null,children:f?"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043d\u0438\u0433\u0435":"\u041f\u0443\u043d\u043a\u0442\u044b \u0441 \u0434\u0430\u043d\u043d\u043e\u0439 \u043a\u043d\u0438\u0433\u043e\u0439 \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438"}),c?null!==f&&void 0!==f?f:Object(j.jsx)(ve,{userIsAdmin:p,publications:c,openBookInfo:function(e){l(e),h(Object(j.jsx)(Se,{book:e}))},openLibraryPointInfo:e.openLibraryPointInfo}):null]})},pe=function(e){var t=e.readers;return Object(j.jsx)(a.k,{children:t.map((function(e){return Object(j.jsx)(a.F,{disabled:!0,multiline:!0,children:Object(j.jsxs)(a.o,{header:"ID: ".concat(e.Id,", ").concat(e.Role),children:[e.Surname," ",e.Name]},e.Id)})}))})},Ce=function(e){var t=e.books;return Object(j.jsx)(a.k,{children:t.map((function(e){return Object(j.jsx)(M,{book:e,indicator:"\u0417\u0430\u043a\u0430\u0437\u043e\u0432: ".concat(e.Taken)},e.Id)}))})},Te=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(r.useState)(null),b=Object(u.a)(O,2),f=b[0],h=b[1];return Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/library/".concat(e.point.Name,"/readers")).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return console.error(e)}))}),[e.point]),Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books/orders/top?param=library_point&param_name="+e.point.Name).then((function(e){return e.json()})).then((function(e){return l(e)}))}),[e.point]),Object(j.jsxs)(a.q,{id:e.id,onClose:function(){return e.setActiveModal(null)},children:[Object(j.jsx)(a.r,{children:e.point.Name}),Object(j.jsxs)(a.k,{children:[c?Object(j.jsx)(a.F,{disabled:0===c.count,onClick:function(){return h(Object(j.jsx)(pe,{readers:c.data}))},indicator:c.count,children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0435\u0439"}):null,d?Object(j.jsx)(a.F,{disabled:0===d.count,onClick:function(){return h(Object(j.jsx)(Ce,{books:d.data}))},indicator:d.count,children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u043e\u043f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}):null]}),null!==f&&void 0!==f?f:null]})};var Ee=function(e){var t=e.book,n=e.point,c=e.user,o=e.onReserveBook,i=Object(r.useState)(!1),s=Object(u.a)(i,2),d=s[0],l=s[1];return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/readers/".concat(c.Id,"/banned")).then((function(e){return e.json()})).then((function(e){var t=e.data;return l(t[0].reader_is_banned)}))}),[c]),Object(j.jsxs)(a.k,{children:[Object(j.jsx)(a.F,{disabled:!0,description:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u043d\u043a\u0442\u0430",children:n.Name}),Object(j.jsx)(a.F,{disabled:!0,description:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",children:t.Title}),Object(j.jsx)(a.F,{disabled:!0,description:"\u0410\u0432\u0442\u043e\u0440\u044b",children:t.Authors}),Object(j.jsx)(a.F,{disabled:!0,indicator:t.Available,children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043a\u043d\u0438\u0433"}),Object(j.jsx)(a.i,{children:Object(j.jsx)(O,{stretched:!0,mode:"primary",disabled:!n.Can_issue_books||"\u0410\u0431\u0438\u0442\u0443\u0440\u0438\u0435\u043d\u0442"===c.Role||d,onClick:o,size:"l",text:n.Can_issue_books?"\u0410\u0431\u0438\u0442\u0443\u0440\u0438\u0435\u043d\u0442"===c.Role||d?"\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043d\u0438\u0433\u0438":"\u0417\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440":"\u041f\u0443\u043d\u043a\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043d\u0438\u0433\u0438"})})]})},me=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1];return Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/library/".concat(e.libraryPoint)).then((function(e){return e.json()})).then((function(e){var t=e.data;return o(t[0])})).catch((function(e){return console.error(e)}))}),[e.libraryPoint]),Object(j.jsxs)(a.q,{id:e.id,onClose:function(){return e.setActiveModal("bookInfo")},children:[Object(j.jsx)(a.r,{left:Object(j.jsx)(a.w,{onClick:function(){return e.setActiveModal("bookInfo")}}),children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u0447\u043d\u043e\u043c \u043f\u0443\u043d\u043a\u0442\u0435"}),d||Object(j.jsx)(a.k,{children:c?Object(j.jsx)(Ee,{book:e.book,point:c,user:e.user,onReserveBook:function(){return function(e,t,n,r){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/library/"+t.Name+"/reserve",{method:"POST",body:JSON.stringify({bookId:e.Id,libraryPoint:t.Name,readerId:n.Id})}).then((function(e){return r(e.ok?Object(j.jsx)(a.C,{header:"\u042d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d"}):Object(j.jsx)(a.C,{header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0437\u0435\u0440\u0432\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435"}))}))}(e.book,c,e.user,l)}}):Object(j.jsx)(a.B,{size:56})})]})},Pe=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1];return Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books/orders/top?param="+(""!==c?"faculty":" ")+"&param_name="+c).then((function(e){return e.json()})).then((function(e){return l(Object(j.jsx)(Ce,{books:e.data}))}))}),[c]),Object(j.jsxs)(a.q,{id:e.id,onClose:function(){return e.setActiveModal(null)},children:[Object(j.jsx)(a.r,{children:"\u0422\u043e\u043f \u043a\u043d\u0438\u0433 \u043f\u043e \u0432\u0443\u0437\u0443 \u0438 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430\u043c"}),Object(j.jsx)(C,{faculty:c,setFaculty:o,facultyOnly:!0}),d||null]})},Ae=function(e){var t=Object(r.useState)(31),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1];return Object(r.useEffect)((function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/books/orders?order_period=".concat(c)).then((function(e){return e.json()})).then((function(e){return l(Object(j.jsx)(Ce,{books:e.data}))}))}),[c]),Object(j.jsxs)(a.q,{id:e.id,onClose:function(){return e.setActiveModal(null)},children:[Object(j.jsxs)(a.r,{children:["\u0417\u0430\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043d\u0438\u0433\u0438 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432 \u0434\u043d\u044f\u0445: ",c]}),Object(j.jsx)(b,{value:c,onChange:o,placeholder:"\u041f\u0435\u0440\u0438\u043e\u0434 \u0437\u0430\u043a\u0430\u0437\u043e\u0432, \u0432 \u0434\u043d\u044f\u0445",type:"number",required:!0}),d||null]})};function Re(e,t){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/library/statistics?stat_kind="+e).then((function(e){return e.json()})).then((function(e){return t(e)}))}var ke=function(e){var t,n,r,c;return Object(j.jsxs)(a.k,{children:[Object(j.jsx)(a.F,{onClick:function(){return e.setList(e.minReaders)},indicator:null===(t=e.minReaders)||void 0===t?void 0:t.count,children:"\u041f\u0443\u043d\u043a\u0442\u044b \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(j.jsx)(a.F,{onClick:function(){return e.setList(e.maxReaders)},indicator:null===(n=e.maxReaders)||void 0===n?void 0:n.count,children:"\u041f\u0443\u043d\u043a\u0442\u044b \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(j.jsx)(a.F,{onClick:function(){return e.setList(e.minDebits)},indicator:null===(r=e.minDebits)||void 0===r?void 0:r.count,children:"\u041f\u0443\u043d\u043a\u0442\u044b \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c \u0437\u0430\u0434\u043e\u043b\u0436\u043d\u0438\u043a\u043e\u0432"}),Object(j.jsx)(a.F,{onClick:function(){return e.setList(e.maxDebits)},indicator:null===(c=e.maxDebits)||void 0===c?void 0:c.count,children:"\u041f\u0443\u043d\u043a\u0442\u044b \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c \u0437\u0430\u0434\u043e\u043b\u0436\u043d\u0438\u043a\u043e\u0432"})]})},ye=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(r.useState)(null),b=Object(u.a)(O,2),f=b[0],h=b[1],S=Object(r.useState)(null),_=Object(u.a)(S,2),v=_[0],x=_[1],p=Object(r.useState)(null),C=Object(u.a)(p,2),T=C[0],E=C[1],m=Object(r.useState)(!0),P=Object(u.a)(m,2),A=P[0],R=P[1];return Object(r.useEffect)((function(){Re("min_debitors",h),Re("min_readers",o),Re("max_debitors",x),Re("max_readers",l),R(!1)}),[]),Object(j.jsxs)(a.q,{id:e.id,onClose:e.onClose,children:[Object(j.jsx)(a.r,{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435"}),A?Object(j.jsx)(a.B,{}):Object(j.jsx)(ke,{setList:E,minReaders:c,maxReaders:d,minDebits:f,maxDebits:v}),T?Object(j.jsx)(a.k,{children:T.data.map((function(e){var t;return Object(j.jsx)(a.F,{disabled:!0,indicator:null!==(t=null===e||void 0===e?void 0:e.Readers)&&void 0!==t?t:null===e||void 0===e?void 0:e.Debitors,children:e.Name},e.Name)}))}):null]})},Ie=function(e){var t=function(){return e.setActiveModal(null)};return Object(j.jsxs)(a.s,{activeModal:e.activeModal,onClose:t,children:[Object(j.jsx)(xe,{user:e.user,id:"bookInfo",setActiveModal:e.setActiveModal,book:e.book,openLibraryPointInfo:e.openLibraryPointInfo}),Object(j.jsx)(me,{id:"libraryPointInfo",setActiveModal:e.setActiveModal,book:e.book,libraryPoint:e.libraryPoint,user:e.user}),Object(j.jsx)(Te,{id:"additionalLibraryPoint",setActiveModal:e.setActiveModal,point:e.libraryPoint}),Object(j.jsx)(Oe,{id:"addBook",setActiveModal:e.setActiveModal}),Object(j.jsx)(w,{id:"userInformation",reader:e.user,onClose:t,setActiveModal:e.setActiveModal}),Object(j.jsx)(Pe,{id:"booksOrdersTop",onClose:t,setActiveModal:e.setActiveModal}),Object(j.jsx)(Ae,{id:"booksOrdersPeriod",onClose:t,setActiveModal:e.setActiveModal}),Object(j.jsx)(ye,{id:"statistics",onClose:t})]})},De=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(j.jsx)(Ie,{activeModal:e.activeModal,setActiveModal:e.setActiveModal,book:c,libraryPoint:d,user:e.user,openLibraryPointInfo:function(t,n){o(n),l(t),e.setActiveModal("libraryPointInfo")}});return Object(j.jsxs)(a.K,{activePanel:e.activePanel,id:e.id,modal:O,children:[Object(j.jsx)(le,{setActiveModal:e.setActiveModal,id:"publicBooks",openBookInfo:function(t){o(t),e.setActiveModal("bookInfo")},user:e.user,addBookButtonClick:function(){return e.setActiveModal("addBook")}}),Object(j.jsx)(ie,{openStatistics:function(){return e.setActiveModal("statistics")},id:"publicLibraryPoints",user:e.user,openPointInfo:function(t){l(t),e.setActiveModal("additionalLibraryPoint")}})]})},He=function(e){var t="\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"===e.user.Role;return Object(j.jsxs)(a.E,{activeView:e.activeView,children:[Object(j.jsx)(De,{user:e.user,id:"publicContent",activePanel:e.activePanel,activeModal:e.activeModal,setActiveModal:e.setActiveModal}),t?Object(j.jsx)(re,{user:e.user,id:"adminContent",activePanel:e.activePanel,activeModal:e.activeModal,setActiveModal:e.setActiveModal}):null]})},Ne=function(e){var t=e.panel,n=e.activePanel,r=e.onClick,c=e.cellText,o=e.view;return Object(j.jsx)(a.d,{disabled:t===n,style:t===n?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-view":o,"data-panel":t,onClick:r,children:c},t)},Le={adminReaders:"\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438",adminDebtors:"\u0417\u0430\u0434\u043e\u043b\u0436\u043d\u0438\u043a\u0438",adminBanned:"\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435",adminLeaveReaders:"\u0412\u044b\u0431\u044b\u0432\u0448\u0438\u0435 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0438"},Fe=function(e){return Object(j.jsx)(a.k,{mode:"plain",children:Object.keys(Le).map((function(t){return Object(j.jsx)(Ne,{view:"adminContent",panel:t,activePanel:e.activePanel,onClick:e.onClick,cellText:Le[t]},t)}))})},ge={publicBooks:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043d\u0438\u0433",publicLibraryPoints:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u0447\u043d\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b"},We=function(e){var t=e.activePanel,n=e.onClick;return Object(j.jsx)(a.k,{mode:"plain",children:Object.keys(ge).map((function(e){return Object(j.jsx)(Ne,{panel:e,activePanel:t,cellText:ge[e],onClick:n,view:"publicContent"},e)}))})},Ke=function(e){var t=e.activePanel,n=e.onClick,r=e.userIsAdmin;return Object(j.jsxs)(a.k,{mode:"plain",separator:"auto",children:[Object(j.jsx)(We,{activePanel:t,onClick:n}),r?Object(j.jsx)(Fe,{activePanel:t,onClick:n}):null]})},Me=n(117),Be=n(118),Ue=function(e){var t=e.user,n=e.openUserInfo,r=e.onLogout;return Object(j.jsx)(a.k,{mode:"plain",separator:"auto",children:Object(j.jsx)(a.F,{disabled:!0,multiline:!0,after:Object(j.jsxs)(j.Fragment,{children:[n?Object(j.jsx)(a.n,{"aria-label":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:n,children:Object(j.jsx)(Me.a,{})}):null,Object(j.jsx)(a.n,{"aria-label":"\u0412\u044b\u0445\u043e\u0434",onClick:r,children:Object(j.jsx)(Be.a,{})})]}),description:t.Role,children:"".concat(t.Surname," ").concat(t.Name)})})},qe=function(e){var t="\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"===e.user.Role;return Object(j.jsx)(a.u,{children:Object(j.jsxs)(a.k,{children:[Object(j.jsx)(Ue,{user:e.user,openUserInfo:e.openUserInfo,onLogout:e.onLogout}),Object(j.jsx)(Ke,{activePanel:e.activePanel,onClick:e.onClick,userIsAdmin:t})]})})},Ve=function(e){var t=Object(r.useState)("publicContent"),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)("publicBooks"),s=Object(u.a)(i,2),d=s[0],l=s[1],O=Object(r.useState)(null),b=Object(u.a)(O,2),f=b[0],h=b[1];return Object(j.jsxs)(a.I,{style:{justifyContent:"center"},children:[Object(j.jsx)(a.H,{animate:!1,spaced:!0,width:"560px",maxWidth:"900px",children:Object(j.jsx)(He,{activeModal:f,setActiveModal:h,activePanel:d,activeView:c,user:e.user,setActivePanel:l})}),Object(j.jsx)(a.H,{fixed:!0,width:"250px",maxWidth:"250px",children:Object(j.jsx)(qe,{user:e.user,activePanel:d,onClick:function(e){o(e.currentTarget.dataset.view),l(e.currentTarget.dataset.panel)},onLogout:e.onLogout})})]})};function we(){return(we=Object(l.a)(d.a.mark((function e(t,n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/users/auth",{method:"POST",body:JSON.stringify({username:t,password:n})});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c.data[0]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ze=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/library-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST+"/users/auth",{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=e.data;t&&c(t)}))}),[n]);return n?Object(j.jsx)(Ve,{onLogout:function(){return c(null)},user:n}):Object(j.jsx)(_,{onButtonClick:function(e,t){return function(e,t){return we.apply(this,arguments)}(e,t).then((function(e){return c(e)}))},style:{justifyContent:"center"}})},Je=function(){return Object(j.jsx)(a.f,{platform:a.D.VKCOM,children:Object(j.jsx)(a.a,{children:Object(j.jsx)(a.b,{children:Object(j.jsx)(ze,{})})})})};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(Je,{})}),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.b11ff4a6.chunk.js.map